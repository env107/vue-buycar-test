webpackJsonp([1],{"6H7Y":function(t,e){},"9/0p":function(t,e){},"B/1Q":function(t,e){},EuXB:function(t,e){},IeCP:function(t,e){},JfCT:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=o("VU/8")({name:"App"},i,!1,function(t){o("6H7Y")},null,null).exports,n=o("/ocq"),c={name:"store-header",mounted:function(){console.log(this.$store.state)},computed:{title:function(){return this.$store.state.storeinfo.title}},data:function(){return{}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-back"},[this._v("<返回")]),this._v(" "),e("div",{staticClass:"header-title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var d=o("VU/8")(c,l,!1,function(t){o("d751")},null,null).exports,r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"nav-container"},[o("div",{class:t.getTagActive("menu"),on:{click:function(e){t.changeTag("menu")}}},[t._v("菜单")]),t._v(" "),o("div",{class:t.getTagActive("images"),on:{click:function(e){t.changeTag("images")}}},[t._v("照片")]),t._v(" "),o("div",{class:t.getTagActive("detail"),on:{click:function(e){t.changeTag("detail")}}},[t._v("详情")])])},staticRenderFns:[]};var g=o("VU/8")({name:"top-nav",data:function(){return{}},methods:{changeTag:function(t){this.$store.dispatch({type:"changeTag",tag:t})},getTagActive:function(t){return t==this.$store.state.storeinfo.panel?"nav-item nav-item-active":"nav-item"}}},r,!1,function(t){o("iHh4")},null,null).exports,u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"gl-container"},[this._v("\n    detail\n")])},staticRenderFns:[]};var p=o("VU/8")({name:"gl_detail"},u,!1,function(t){o("jiQD")},null,null).exports,f={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.tag,on:{click:this.onclick}},[this._v("\n    "+this._s(this.title)+"\n")])},staticRenderFns:[]};var v={computed:{showSpecDialog:{set:function(t){this.$store.dispatch({type:"showSpecDialog",on:t})},get:function(){let t=this.$store.state.storeinfo,e=t.toggle.showSpec.goods;return!(e.hasOwnProperty("specinfo")&&e.specinfo.length<1)&&t.toggle.showSpec.on}},goods:function(){return this.$store.state.storeinfo.toggle.showSpec.goods},getSpecText:function(){let t=this.$store.state.storeinfo.toggle.showSpec.goods;return t.hasOwnProperty("spectext")&&""!=t.spectext?t.spectext:"规格"},specTotal:function(){let t=this.$store.state.storeinfo.toggle.showSpec.goods,e=0;if(t.hasOwnProperty("specinfo")&&t.specinfo.length>0){for(var o in t.specinfo)1==t.specinfo[o].default&&(e=o);return t.specinfo[e].total}return 0}},methods:{tagSelector:function(t){this.$store.dispatch({type:"toggleSpecTag",index:t})},addSpecGoods:function(t){void 0==t&&(t="plus"),this.$store.dispatch({type:"addCarSpecToggle",method:t})}},components:{glsTag:o("VU/8")({props:["title","default"],name:"gls_tag",computed:{tag:function(){return this.default?"sec-tag sec-tag-active":"sec-tag"}},methods:{onclick:function(t){this.$emit("click")}}},f,!1,function(t){o("lWFU")},null,null).exports}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"spec-container"},[o("el-dialog",{attrs:{title:"选择商品规格",visible:t.showSpecDialog,width:"85%"},on:{"update:visible":function(e){t.showSpecDialog=e}}},[o("div",{staticClass:"goodsinfo-spec-container"},[o("div",{staticClass:"spec-shop-info"},[o("div",{staticClass:"specshop-img"},[o("img",{attrs:{src:t.goods.goodsimage}})]),t._v(" "),o("div",{staticClass:"specshop-title"},[t._v(t._s(t.goods.title))])]),t._v(" "),o("div",{staticClass:"spec-selector"},[o("div",{staticClass:"spec-title"},[t._v("选择"+t._s(t.getSpecText))]),t._v(" "),o("div",{staticClass:"spec-box"},t._l(t.goods.specinfo,function(e,s){return o("gls-tag",{key:s,attrs:{title:e.title,default:e.default},on:{click:function(e){t.tagSelector(s)}}})}))]),t._v(" "),o("div",{staticClass:"spec-total"},[t.specTotal>0?o("button",{staticClass:"button-p button-reduce",on:{click:function(e){t.addSpecGoods("reduce")}}}):t._e(),t._v(" "),t.specTotal>0?o("div",{staticClass:"gl-total"},[t._v(t._s(t.specTotal))]):t._e(),t._v(" "),o("button",{staticClass:"button-p button-buy",on:{click:function(e){t.addSpecGoods()}}})])])])],1)},staticRenderFns:[]};var m={render:function(){var t=this.$createElement,e=this._self._c||t;return 0!=this.value?e("div",{staticClass:"badge-total"},[this._v("\n    "+this._s(this.value)+"\n")]):this._e()},staticRenderFns:[]};var _={name:"gl_menu",components:{glSpec:o("VU/8")(v,h,!1,function(t){o("oFvF")},null,null).exports,glBadge:o("VU/8")({props:["index"],name:"badge_total",computed:{value:function(){var t=0;return this.$store.state.storeinfo.data[this.index].goodslist.forEach(e=>{t+=e.total}),t}}},m,!1,function(t){o("EuXB")},null,null).exports},computed:{menudata:function(){return this.$store.state.storeinfo.data},goodsdata:function(){let t=this.$store.state.storeinfo.menuIndex;return this.$store.state.storeinfo.data[t]}},methods:{glMenu:function(t){return t==this.$store.state.storeinfo.menuIndex?"gl-menu-item gl-menu-item-active":"gl-menu-item"},changeMenuIndex:function(t){this.$store.dispatch({type:"changeMenuIndex",index:t})},getTagType:function(t){return"gl-tag gl-tag-"+t},hasTag:function(t){var e=t.activitys;return void 0!=e&&(!!e.hasOwnProperty("tags")&&e.tags.length>1)},addGoods:function(t,e){void 0==e&&(e="plus"),this.$store.dispatch({type:"addCarToggle",goods:t,method:e})},getSpecGoodsInfo:function(t,e){this.$store.dispatch({type:"showSpecDialog",goods:t,on:!0,index:e})},hasSpecInfo:function(t){return t.hasOwnProperty("specinfo")&&t.specinfo.length>0}}},b={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"gl-container gl-body"},[o("div",{staticClass:"gl-menu"},t._l(t.menudata,function(e,s){return o("div",{key:e.id,class:t.glMenu(s),on:{click:function(e){t.changeMenuIndex(s)}}},[t._v("\n          "+t._s(e.title)),o("gl-badge",{attrs:{index:s}})],1)})),t._v(" "),o("div",{staticClass:"gl-menu-content"},t._l(t.goodsdata.goodslist,function(e,s){return o("div",{key:s,staticClass:"gl-goods-item"},[o("div",{staticClass:"goodsinfo-top"},[o("div",{staticClass:"goodsinfo-left"},[o("img",{staticClass:"gl-goods-img",attrs:{src:e.goodsimage}})]),t._v(" "),o("div",{staticClass:"goodsinfo-right"},[o("div",{staticClass:"goodsinfo-title"},[t._v(t._s(e.title))]),t._v(" "),t.hasTag(t.goodsdata)?o("div",{staticClass:"goodsinfo-tag-group"},t._l(t.goodsdata.activitys.tags,function(e,s){return o("div",{key:s,class:t.getTagType(e.type)},[t._v(t._s(e.title))])})):t._e(),t._v(" "),o("div",{staticClass:"goodsinfo-buy"},[o("el-rate",{staticClass:"grade-goods",attrs:{disabled:""},model:{value:e.grade,callback:function(o){t.$set(e,"grade",o)},expression:"goods.grade"}}),t._v(" "),o("div",{staticClass:"goodsinfo-buyinfo"},[t._v("\n                          评价:"+t._s(e.commentCount)+" 销量:"+t._s(e.sales)+"\n                      ")])],1)])]),t._v(" "),o("div",{staticClass:"goodsinfo-bottom"},[o("div",{staticClass:"goodsinfo-price-container"},[t._v("\n                   ¥ "+t._s(e.price)+" \n               ")]),t._v(" "),o("div",{staticClass:"goodsinfo-button-group"},[t.hasSpecInfo(e)?o("button",{staticClass:"button-p button-desc",on:{click:function(o){t.getSpecGoodsInfo(e,s)}}},[t._v("选规格")]):t._e(),t._v(" "),e.total>0&&!t.hasSpecInfo(e)?o("button",{staticClass:"button-p button-reduce",on:{click:function(o){t.addGoods(e,"reduce")}}}):t._e(),t._v(" "),e.total>0&&!t.hasSpecInfo(e)?o("div",{staticClass:"gl-total"},[t._v(t._s(e.total))]):t._e(),t._v(" "),t.hasSpecInfo(e)?t._e():o("button",{ref:"plus_button_"+s,refInFor:!0,staticClass:"button-p button-buy",on:{click:function(o){t.addGoods(e)}}})])])])})),t._v(" "),o("gl-spec")],1)},staticRenderFns:[]};var C={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"gl-container"},[this._v("\n    images\n")])},staticRenderFns:[]};var x={name:"gooddlist",computed:{panel:function(){return this.$store.state.storeinfo.panel},slide_direction:function(){return"left"==this.$store.state.storeinfo.direction?"glist-l":"glist-r"}},data:function(){return{}},components:{glDetail:p,glMenu:o("VU/8")(_,b,!1,function(t){o("IeCP")},null,null).exports,glImages:o("VU/8")({name:"gl_images"},C,!1,function(t){o("9/0p")},null,null).exports}},y={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("transition",{attrs:{name:t.slide_direction}},["detail"==t.panel?o("gl-detail"):t._e(),t._v(" "),"menu"==t.panel?o("gl-menu"):t._e(),t._v(" "),"images"==t.panel?o("gl-images"):t._e()],1)],1)},staticRenderFns:[]};var T={name:"footerinfo",computed:{calcNumber:function(){return this.$store.state.storeinfo.toggle.addCarToggle?"calc-num calc-add":"calc-num"},total:function(){var t=0;return this.$store.state.storeinfo.data.forEach(e=>{e.goodslist.forEach(e=>{t+=e.total})}),t},totalPrice:function(){return this.$store.state.storeinfo.totalprice}},methods:{buy:function(){let t=this.$store.state.storeinfo;if(this.total<1)return this.$alert("请选择商品!","提示",{center:!0}),!1;var e={};for(var o in e.totalprice=t.totalprice,e.total=this.total,e.data={},t.data){var s=t.data[o],i="cate"+s.cateid;for(var a in e.data.hasOwnProperty(i)||(e.data[i]=[]),s.goodslist){var n=s.goodslist[a];if(n.hasOwnProperty("specinfo")&&n.specinfo.length>0)for(var c in n.specinfo){let t=n.specinfo[c],o={};t.total<1||(o.gid=n.gid,o.title=n.title,o.spec=t,o.total=t.total,o.spectext=n.title+"("+t.title+")",e.data[i].push(o))}else e.data[i].push({gid:n.gid,title:n.title,total:n.total,spec:""})}}console.log(e)}}},F={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"calc-panel-container"},[o("div",{staticClass:"calc-panel"},[o("div",{class:t.calcNumber},[t._v(t._s(t.total))]),t._v(" "),o("div",{staticClass:"calc-price"},[t._v("¥ "+t._s(t.totalPrice)+" ")])]),t._v(" "),o("div",{staticClass:"calc-button-group"},[o("el-button",{attrs:{type:"success"},on:{click:function(e){t.buy()}}},[t._v("立即下单")])],1)])},staticRenderFns:[]};var S={name:"Container",data:function(){return{}},components:{top:d,TopNav:g,goodslist:o("VU/8")(x,y,!1,function(t){o("B/1Q")},null,null).exports,footerContainer:o("VU/8")(T,F,!1,function(t){o("zeMk")},null,null).exports}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"header-flex"},[e("top"),this._v(" "),e("top-nav")],1),this._v(" "),e("div",{staticClass:"container-flex"},[e("goodslist")],1),this._v(" "),e("div",{staticClass:"footer-flex"},[e("footer-container")],1)])},staticRenderFns:[]};var w=o("VU/8")(S,$,!1,function(t){o("JfCT")},null,null).exports;s.default.use(n.a);var k=new n.a({routes:[{path:"/",name:"main",component:w}]}),I=o("zL8q"),E=o.n(I),R=o("NYxO"),P=o("Ria2");s.default.use(R.a);!function(){const t=o("Ria2");for(var e=0;e<t.length;e++);}();const U={state:{version:"1.0",versionType:"build"},getters:{version:t=>t.versionType+" - "+t.version}},A={state:{mid:6,title:"叫饭啦",backurl:"",panel:"menu",direction:"left",menuIndex:0,data:P.default,toggle:{addCarToggle:!1,showSpec:{on:!1,goods:{},goodsindex:""}},totalprice:0},mutations:{changeTag(t,e){let o=t.panel+"-"+e.tag;t.direction="menu-images"==o||"menu-detail"==o||"images-detail"==o?"left":"right",t.panel=e.tag},changeMenuIndex(t,{index:e}){t.menuIndex=e},addCarToggle(t,e){t.menuIndex;var o=parseFloat(t.totalprice),s="plus",i=e.goods;e.hasOwnProperty("method")&&(s=e.method),"plus"==s?(i.total++,o+=parseFloat(i.price)):"reduce"==s&&(i.total>=1&&i.total--,o-=parseFloat(i.price)),t.totalprice=o<0?0:o.toFixed(2),t.toggle.addCarToggle=!0,setTimeout(function(){t.toggle.addCarToggle=!1},500)},addCarSpecToggle(t,e){let o=t.toggle.showSpec.goods,s=parseFloat(t.totalprice);var i="plus";for(var a in e.hasOwnProperty("method")&&(i=e.method),o.specinfo)1==o.specinfo[a].default&&("plus"==i?(o.specinfo[a].total++,o.total++,s+=o.price):"reduce"==i&&(o.specinfo[a].total>=1&&o.specinfo[a].total--,o.total>=1&&o.total--,s-=o.price));t.totalprice=s<0?0:s.toFixed(2),t.toggle.addCarToggle=!0,setTimeout(function(){t.toggle.addCarToggle=!1},500),console.log(t.data)},showSpecDialog(t,e){t.toggle.showSpec.on=e.on,1==e.on?(t.toggle.showSpec.goods=e.goods,t.toggle.showSpec.goodsindex=e.index):(t.toggle.showSpec.goods="",t.toggle.showSpec.goodsindex="")},toggleSpecTag(t,{index:e}){let o=t.menuIndex,s=t.toggle.showSpec.goodsindex,i=t.data[o].goodslist[s];for(var a=0;a<i.specinfo.length;a++)a==e?i.specinfo[e].default=!0:i.specinfo[a].default=!1}},actions:{changeTag(t,e){t.commit({type:"changeTag",tag:e.tag})},changeMenuIndex(t,e){t.commit({type:"changeMenuIndex",index:e.index})},addCarToggle(t,{goods:e,method:o}){t.commit({type:"addCarToggle",goods:e,method:o})},addCarSpecToggle(t,{method:e}){t.commit({type:"addCarSpecToggle",method:e})},showSpecDialog(t,{goods:e,on:o,index:s}){t.commit({type:"showSpecDialog",goods:e,on:o,index:s})},toggleSpecTag(t,{index:e}){t.commit({type:"toggleSpecTag",index:e})},reduceCarToggle(t,e){t.commit({type:"reduceCarToggle"})}}};var M=new R.a.Store({modules:{appinfo:U,storeinfo:A}});o("tvR6"),o("X21A");s.default.config.productionTip=!1,s.default.use(E.a),new s.default({el:"#app",router:k,store:M,components:{App:a},template:"<App/>"})},Ria2:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{cateid:1,title:"煲仔饭",activitys:{tags:[{title:"活动收单免单",type:"success"},{title:"新用户5折",type:"important"}]},goodslist:[{gid:245,total:0,title:"盐焗鸡煲饭",goodsprice:21.5,price:21.5,grade:4.2,commentCount:14,sales:165,cateid:1,spectext:"味道",specinfo:[{specid:21,title:"原味",price:21.5,default:!0,total:0},{specid:22,title:"辣味",price:22,default:!1,total:0}],goodsimage:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1522758764957&di=8ee4ab187bb365d81faae6e4993f4977&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fimgad%2Fpic%2Fitem%2Fb21bb051f8198618cdb3dcaa41ed2e738bd4e62c.jpg"},{gid:246,total:0,title:"冬菇鸡+腊梅煲仔饭",goodsprice:22,price:19.8,grade:4.7,commentCount:32,sales:218,cateid:1,specinfo:[],goodsimage:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1522758764957&di=8ee4ab187bb365d81faae6e4993f4977&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fimgad%2Fpic%2Fitem%2Fb21bb051f8198618cdb3dcaa41ed2e738bd4e62c.jpg"},{gid:247,total:0,title:"排骨肉饼煲仔饭",goodsprice:17,price:15.6,grade:4.2,commentCount:30,sales:132,cateid:1,specinfo:[{specid:21,title:"原味",price:21.5,default:!0,total:0},{specid:22,title:"辣味",price:22,default:!1,total:0}],goodsimage:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1522758764957&di=8ee4ab187bb365d81faae6e4993f4977&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fimgad%2Fpic%2Fitem%2Fb21bb051f8198618cdb3dcaa41ed2e738bd4e62c.jpg"}]},{cateid:2,title:"快餐类",activitys:{},goodslist:[{gid:248,total:0,title:"鱼香茄子饭",goodsprice:15,price:12.5,grade:4.6,commentCount:43,sales:77,cateid:2,specinfo:[{specid:21,title:"原味",price:21.5,default:!0,total:0},{specid:22,title:"辣味",price:22,default:!1,total:0}],goodsimage:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1522758764957&di=8ee4ab187bb365d81faae6e4993f4977&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fimgad%2Fpic%2Fitem%2Fb21bb051f8198618cdb3dcaa41ed2e738bd4e62c.jpg"}]},{cateid:3,title:"小吃类",activitys:{},goodslist:[]}]},X21A:function(t,e){},d751:function(t,e){},iHh4:function(t,e){},jiQD:function(t,e){},lWFU:function(t,e){},oFvF:function(t,e){},tvR6:function(t,e){},zeMk:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5c67be3b9330ebe9dbf7.js.map